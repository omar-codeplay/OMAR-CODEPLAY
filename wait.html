<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wait Page</title>
    <link rel="stylesheet" href="css/wait.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3758016323496227"
    crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-3758016323496227">
</head>
<body>
    <div class="wait-container">
        <h1>Please wait while we prepare your content...</h1>
        <p>You will be redirected in <span id="countdown">30</span> seconds.</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const encodedUrl = localStorage.getItem('nextPageUrl');
            if (!encodedUrl) {
                throw new Error('Invalid URL');
            }
    
            const decodedUrl = atob(encodedUrl);
    
            // Countdown timer
            let countdown = 30;
            const countdownElement = document.getElementById('countdown');
            let interval;
    
            const startCountdown = () => {
                interval = setInterval(() => {
                    countdown--;
                    countdownElement.textContent = countdown;
                    if (countdown <= 0) {
                        clearInterval(interval);
                        window.location.href = decodedUrl; // Redirect to the decoded URL
                    }
                }, 1000);
            };
    
            startCountdown();
    
            document.addEventListener('visibilitychange', () => {
                if (document.hidden) {
                    clearInterval(interval); // Stop the countdown if the page is not visible
                } else {
                    startCountdown(); // Resume the countdown if the page becomes visible again
                }
            });
        });
    </script>
</body>
</html>